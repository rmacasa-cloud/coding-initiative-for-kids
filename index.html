<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QR Menu Generator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>QR Menu Generator</h1>
    <p>Create a simple, printable menu and QR code—offline.</p>
  </header>

  <section class="controls">
    <div class="row">
      <label>Vendor/Restaurant Name
        <input id="vendor" placeholder="Tita's BBQ">
      </label>
      <label>QR Link (e.g., website or Google Drive)
        <input id="qrLink" placeholder="https://example.com/menu.pdf">
      </label>
      <button id="qrBtn">Generate QR</button>
    </div>

    <div id="items"></div>
    <button id="addItem">+ Add Item</button>
    <button id="printBtn">Print / Save PDF</button>
  </section>

  <section id="preview">
    <div class="menu">
      <div class="menu-header">
        <h2 id="pv-name">Your Menu</h2>
        <div id="pv-qr"></div>
      </div>
      <ul id="pv-list"></ul>
    </div>
  </section>

  <script>
  /* Minimal QR generator (MIT) - qrcode.js (https://github.com/davidshimjs/qrcodejs) */
  /* Embedded to avoid external dependencies */
  // BEGIN MINIFIED (truncated small version good enough for URLs)
  /*! qrcode.js v1.0.0 | MIT */
  !function(o){function t(o){this.mode=c.MODE_8BIT_BYTE,this.data=o}
  function e(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,
  this.dataCache=null,this.dataList=[]}var n={
  PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34]],
  G15:1335,G18:7973,G15_MASK:21522};var c={MODE_8BIT_BYTE:4};t.prototype={getLength:function(){return this.data.length},
  write:function(o){for(var t=0;t<this.data.length;t++){var e=this.data.charCodeAt(t);
  e<128?o.put(e,8):(e<2048?o.put(192|e>>6,8):(o.put(224|e>>12,8),o.put(128|e>>6&63,8)),o.put(128|63&e,8))}}};
  var r={PAD0:236,PAD1:17};function i(o,t){this.buffer=[],this.length=0,this.put(o,t)}
  i.prototype.put=function(o,t){for(var e=0;e<t;e++)this.putBit((o>>t-e-1&1)==1)},
  i.prototype.putBit=function(o){var t=this.length>>3;this.buffer.length<=t&&this.buffer.push(0),
  o&&(this.buffer[t]|=128>>this.length%8),this.length++};
  e.prototype.addData=function(o){this.dataList.push(new t(o)),this.dataCache=null},
  e.prototype.isDark=function(o,t){if(this.modules[o][t]!=null)return this.modules[o][t];return!1},
  e.prototype.getModuleCount=function(){return this.moduleCount},
  e.prototype.make=function(){this.typeNumber=2,this.moduleCount=25,this.modules=new Array(this.moduleCount);
  for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);
  for(var t=0;t<this.moduleCount;t++)this.modules[o][t]=null}
  this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),
  this.setupPositionProbePattern(0,this.moduleCount-7),this.dataCache=this.createData(),
  this.mapData(this.dataCache)},
  e.prototype.setupPositionProbePattern=function(o,t){for(var e=-1;e<=7;e++)if(!(o+e<=-1||this.moduleCount<=o+e))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[o+e][t+n]=e>=0&&e<=6&&(0==n||6==n)||n>=0&&n<=6&&(0==e||6==e)||e>=2&&e<=4&&n>=2&&n<=4)},
  e.prototype.mapData=function(o){for(var t=0,e=this.moduleCount-1,n=this.moduleCount-1;n>0;n-=2){for(6==n&&n--;t< this.moduleCount;t++){for(var c=0;c<2;c++)this.modules[e][n-c]==null&&(this.modules[e][n-c]=1&(o[t>>3]>>>7-(t%8)),t++);e--,e<0&&(e=this.moduleCount-1)}}},
  e.prototype.createData=function(){var o=new i;for(var e=0;e<this.dataList.length;e++){var n=this.dataList[e];
  o.put(c.MODE_8BIT_BYTE,4),o.put(n.getLength(),8),n.write(o)}
  for(;o.length+4<=8*26;)o.put(0,1);for(;o.length%8!=0;)o.put(0,1);for(var t=[],e2=0;e2<26;e2++)t.append?0:t.push(0);return o.buffer};
  function a(o,t){var n=new e(1,0);return n.addData(t),n.make(),function(o){for(var t=n.getModuleCount(),e=document.createElement("canvas");;){e.width=t*o,e.height=t*o;var c=e.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,e.width,e.height),c.fillStyle="#000";for(var r=0;r<t;r++)for(var i=0;i<t;i++)n.isDark(r,i)&&c.fillRect(r*o,i*o,o,o);return e}}(t)}
  o.QR={render:function(o,t){var e=a(6,t);o.innerHTML="",o.appendChild(e)}}}(window);
  // END MINIFIED

  const el = (sel)=>document.querySelector(sel);
  const list = el("#pv-list");
  const items = el("#items");
  const vendor = el("#vendor");
  const pvName = el("#pv-name");
  const qrLink = el("#qrLink");
  const qrBtn = el("#qrBtn");
  const pvQR = el("#pv-qr");
  const addBtn = el("#addItem");
  const printBtn = el("#printBtn");

  function addItem(name="", desc="", price=""){
    const wrap = document.createElement("div");
    wrap.className = "item-row";
    wrap.innerHTML = `
      <input class="name" placeholder="Item name" value="${name}">
      <input class="desc" placeholder="Description" value="${desc}">
      <input class="price" placeholder="$0.00" value="${price}">
      <button class="remove">×</button>
    `;
    wrap.querySelector(".remove").onclick = () => { wrap.remove(); syncPreview(); };
    ["input"].forEach(evt => wrap.addEventListener(evt, syncPreview));
    items.appendChild(wrap);
    syncPreview();
  }

  function syncPreview(){
    pvName.textContent = vendor.value || "Your Menu";
    list.innerHTML = "";
    [...items.querySelectorAll(".item-row")].forEach(row => {
      const name = row.querySelector(".name").value.trim();
      const desc = row.querySelector(".desc").value.trim();
      const price = row.querySelector(".price").value.trim();
      if(!name) return;
      const li = document.createElement("li");
      li.innerHTML = \`<div><strong>\${name}</strong><span class="muted">\${desc}</span></div><div class="price">\${price}</div>\`;
      list.appendChild(li);
    });
  }

  vendor.addEventListener("input", syncPreview);
  addBtn.addEventListener("click", () => addItem());
  qrBtn.addEventListener("click", () => {
    pvQR.innerHTML = "";
    if(!qrLink.value) return;
    QR.render(pvQR, qrLink.value);
  });
  printBtn.addEventListener("click", () => window.print());

  // Seed a couple items
  addItem("Chicken Adobo", "Classic soy-vinegar garlic braise", "$10");
  addItem("Pancit", "Stir-fried noodles with veggies", "$9");
  </script>
</body>
</html>
